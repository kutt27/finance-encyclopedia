<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Card Interface</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <h1>Devpedia Simple Cards</h1>
    <div id="card-container">
        </div>

    <div id="cardModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-title"></h2>
            <p id="modal-explanation"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const container = document.getElementById('card-container');
            const modal = document.getElementById('cardModal');
            const closeButton = document.querySelector('.close-button');
            const modalTitle = document.getElementById('modal-title');
            const modalExplanation = document.getElementById('modal-explanation');

            // Function to fetch data and create cards
            async function loadCards() {
                try {
                    // Fetch the JSON data from the file
                    const response = await fetch('cards.json'); 
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    const cardsData = await response.json();

                    // Loop through the data and create an HTML card for each item
                    cardsData.forEach(cardInfo => {
                        const cardDiv = document.createElement('div');
                        cardDiv.classList.add('card');
                        
                        cardDiv.innerHTML = `
                            <h2>${cardInfo.title}</h2>
                            <p class="topic">Topic: ${cardInfo.topic}</p>
                            <button data-explanation="${cardInfo.explanation}" 
                                    data-title="${cardInfo.title}">
                                ${cardInfo.buttonText}
                            </button>
                        `;

                        // Add event listener to the button
                        const button = cardDiv.querySelector('button');
                        button.addEventListener('click', (event) => {
                            const explanation = event.target.getAttribute('data-explanation');
                            const title = event.target.getAttribute('data-title');
                            
                            // Populate the modal with content and show it
                            modalTitle.textContent = title;
                            modalExplanation.textContent = explanation;
                            modal.style.display = "block";
                        });

                        container.appendChild(cardDiv);
                    });

                } catch (error) {
                    console.error('Could not load card data:', error);
                    container.innerHTML = '<p>Error loading content.</p>';
                }
            }

            // Close modal when the 'x' is clicked
            closeButton.addEventListener('click', () => {
                modal.style.display = "none";
            });

            // Close modal when clicking outside of it
            window.addEventListener('click', (event) => {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            });

            // Start the application
            loadCards();
        });
    </script>

</body>
</html>